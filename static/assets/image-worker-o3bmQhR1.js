(function(){"use strict";const i="assets-cache-v1";let n=0,t=!1;self.addEventListener("message",async s=>{const{imageURL:e,imgCount:b,sectionIndex:f,imgCountInFirstSections:a,isVideoBlock:c,blob:l}=s.data,o=await(await fetch(e)).blob();n++,t||(t=n===a),caches.open(i).then(r=>{r.put(e,new Response(o))}),self.postMessage({imageURL:e,blob:l||o,...t?{isLoadingFinished:t}:{},isVideoBlock:c})}),self.addEventListener("fetch",s=>{s.respondWith(caches.match(s.request).then(e=>e?(console.log(e.response),e):fetch(s.request)))})})();
