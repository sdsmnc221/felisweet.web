(function(){"use strict";const i="assets-cache-v1";let t=0,n=!1;self.addEventListener("message",async s=>{const{imageURL:e,imgCount:c,imgIndex:a,sectionIndex:l,imgCountInCurrentSection:r,imgCountInFirstSections:g,isVideoBlock:u,blob:b}=s.data,o=await(await fetch(e)).blob();t++,console.log({imgCount:c,imgIndex:a,countImg:t,sectionIndex:l,imgCountInCurrentSection:r}),n||(n=t===g&&t!==0),caches.open(i).then(f=>{f.put(e,new Response(o))}),self.postMessage({imageURL:e,blob:b||o,...n?{isLoadingFinished:n}:{},isVideoBlock:u})}),self.addEventListener("fetch",s=>{s.respondWith(caches.match(s.request).then(e=>e?(console.log(e.response),e):fetch(s.request)))})})();
